{"version":3,"sources":["components/Input.js","components/Button.js","components/Copier.js","utils/url.js","utils/base62.js","components/Container.js","App.js","index.js"],"names":["Input","className","id","this","props","value","placeholder","onChange","type","autoFocus","spellCheck","valid","replace","Component","Button","onClick","style","disabled","children","Copier","handleOnClick","el","document","createElement","what","setAttribute","position","left","body","appendChild","select","execCommand","removeChild","onCopy","api_url","process","APP_URL","base62","number","alphabetArray","split","hash","unshift","Math","floor","join","Container","getTop100","a","top100","axios","get","response","data","console","log","setState","validate","isValid","state","test","onInputChange","event","target","url","resetMessage","message","reset","shortened","storeLink","post","status","createShortLink","existing","Promise","resolve","reject","setTimeout","then","showTop100","link","scope","map","element","key","href","rel","times_accessed","App","React","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d6eea099.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './Input.css';\n\nclass Input extends Component {\n  render() {\n    return (\n      <div className='wrapper'>\n        <input\n          id={this.props.id}\n          value={this.props.value}\n          placeholder={this.props.placeholder}\n          onChange={this.props.onChange}\n          type={this.props.type}\n          autoFocus={this.props.autoFocus}\n          spellCheck={false}\n          className={!this.props.valid ? 'input input_invalid' : 'input'}\n        />\n        <span\n          className={\n            !this.props.valid ? 'highlight highlight--invalid' : 'highlight'\n          }\n        >\n          {this.props.value ? this.props.value.replace(/ /g, '\\u00a0') : ''}\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default Input;\n","import React from 'react';\n\nimport './Button.css';\n\nconst Button = props => {\n  return (\n    <button\n      onClick={props.onClick}\n      className='button'\n      style={props.style}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { Component } from 'react';\n\nexport default class Copier extends Component {\n  handleOnClick = () => {\n    const el = document.createElement('textarea');\n    el.value = this.props.what;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n\n    return this.props.onCopy();\n  };\n\n  render() {\n    return <div onClick={this.handleOnClick}>{this.props.children}</div>;\n  }\n}\n","const env = process.env.APP_URL;\n\nconst api_url = env || 'http://localhost:3000/api/v1';\n\nexport default api_url;\n","const base62 = number => {\n  const alphabetArray = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(\n    ''\n  );\n\n  if (number === 0) {\n    return alphabetArray[0];\n  }\n\n  let hash = [];\n  // let i = 0;\n\n  while (number > 0) {\n    hash.unshift(alphabetArray[number % 62]);\n    number = Math.floor(number / 62);\n  }\n\n  return hash.join('');\n};\n\nexport default base62;\n","import React, { Component } from 'react';\nimport Input from './Input';\nimport Button from './Button';\nimport Copier from './Copier';\nimport './Container.css';\nimport api_url from '../utils/url';\nimport base62 from '../utils/base62';\nimport axios from 'axios';\n\nconst fallbackMessage = 'Please paste a proper link...';\n\nexport default class Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: '',\n      shortened: '',\n      isValid: false,\n      message: fallbackMessage,\n      top100: [],\n      showTop100: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getTop100();\n  }\n\n  getTop100 = async () => {\n    let top100 = [];\n    try {\n      const response = await axios.get(`${api_url}/links/top100`);\n      top100 = response.data;\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ top100 });\n  };\n\n  validate = value => {\n    let { isValid } = this.state;\n    isValid = /^(?:(?:(?:http(s)?):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(\n      value\n    );\n    this.setState({ isValid });\n  };\n\n  onInputChange = event => {\n    const { value } = event.target;\n    this.setState({ url: value });\n    this.validate(value);\n  };\n\n  resetMessage = () => {\n    this.setState({ message: fallbackMessage });\n  };\n\n  reset = () => {\n    this.setState({\n      shortened: '',\n      url: '',\n      isValid: false,\n    });\n  };\n\n  storeLink = async hash => {\n    try {\n      const response = await axios.post(`${api_url}/links/store`, {\n        url: this.state.url,\n        shortened: hash,\n      });\n      this.setState({ shortened: response.data.shortened });\n    } catch (error) {\n      if (error.response.status === 422) {\n        console.log(error.response.data);\n        this.reset();\n      }\n    }\n  };\n\n  createShortLink = async () => {\n    const { url } = this.state;\n    let existing = {};\n    try {\n      const response = await axios.post(`${api_url}/links/get`, {\n        url: url,\n      });\n      existing = response.data;\n\n      if (existing) {\n        this.setState({ shortened: existing.shortened });\n      } else {\n        const response = await axios.get(`${api_url}/links/count`);\n        const hash = base62(response.data);\n        this.storeLink(hash);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    this.getTop100();\n  };\n\n  onCopy = () => {\n    this.reset();\n    return new Promise((resolve, reject) => {\n      this.setState({ message: 'Your link is copied!' });\n      return setTimeout(() => {\n        return resolve();\n      }, 3000);\n    }).then(() => {\n      return this.resetMessage;\n    });\n  };\n\n  showTop100 = () => {\n    this.setState({ showTop100: !this.state.showTop100 });\n  };\n\n  render() {\n    const link = this.state.isValid ? (\n      this.state.shortened ? (\n        <Copier what={this.state.shortened} onCopy={this.onCopy}>\n          Click on me! Shortened: {this.state.shortened}\n        </Copier>\n      ) : (\n        'Ready to shorten'\n      )\n    ) : (\n      this.state.message\n    );\n    return (\n      <div className='container'>\n        <h1>URL Shortener</h1>\n        <div className='link-shortened'>{link}</div>\n        <Input\n          value={this.state.url}\n          onChange={this.onInputChange}\n          type='text'\n          valid={this.state.isValid}\n          autoFocus={true}\n        />\n        <Button\n          onClick={() => this.createShortLink()}\n          disabled={!this.state.isValid}\n        >\n          Shorten\n        </Button>\n        <Button onClick={() => this.showTop100()}>TOP 100</Button>\n        {this.state.showTop100 ? (\n          <div className='top100'>\n            <h3>Top 100 Most frequently accessed URLs</h3>\n            <table className='table table-light table-hover'>\n              <thead className='thead-dark'>\n                <tr>\n                  <th scope='col'>URL</th>\n                  <th scope='col'>Times Accessed</th>\n                </tr>\n              </thead>\n              <tbody>\n                {this.state.top100.map(element => {\n                  return (\n                    <tr key={element.id}>\n                      <td className='url'>\n                        <a\n                          href={element.url}\n                          target='_blank'\n                          rel='noopener noreferrer'\n                        >\n                          {element.url}\n                        </a>\n                      </td>\n                      <td>{element.times_accessed}</td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        ) : (\n          ''\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './App.css';\nimport Container from './components/Container';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div className='App'>\n        <Container />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('app'));\n"],"sourceRoot":""}