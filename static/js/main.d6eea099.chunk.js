(this.webpackJsonpurl_shortener_frontend=this.webpackJsonpurl_shortener_frontend||[]).push([[0],{20:function(e,t,n){e.exports=n(48)},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(19),o=n.n(s),c=(n(25),n(2)),i=n(3),l=n(5),u=n(4),p=n(6),h=(n(26),n(7)),d=n.n(h),f=n(9),m=(n(28),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("input",{id:this.props.id,value:this.props.value,placeholder:this.props.placeholder,onChange:this.props.onChange,type:this.props.type,autoFocus:this.props.autoFocus,spellCheck:!1,className:this.props.valid?"input":"input input_invalid"}),r.a.createElement("span",{className:this.props.valid?"highlight":"highlight highlight--invalid"},this.props.value?this.props.value.replace(/ /g,"\xa0"):""))}}]),t}(a.Component)),v=(n(29),function(e){return r.a.createElement("button",{onClick:e.onClick,className:"button",style:e.style,disabled:e.disabled},e.children)}),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleOnClick=function(){var e=document.createElement("textarea");return e.value=n.props.what,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),n.props.onCopy()},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.handleOnClick},this.props.children)}}]),t}(a.Component),k=(n(30),Object({NODE_ENV:"production",PUBLIC_URL:"/url_shortener_frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).APP_URL||"http://localhost:3000/api/v1"),E=function(e){var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");if(0===e)return t[0];for(var n=[];e>0;)n.unshift(t[e%62]),e=Math.floor(e/62);return n.join("")},O=n(8),g=n.n(O),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTop100=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,g.a.get("".concat(k,"/links/top100"));case 4:a=e.sent,t=a.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:n.setState({top100:t});case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.validate=function(e){var t=n.state.isValid;t=/^(?:(?:(?:http(s)?):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e),n.setState({isValid:t})},n.onInputChange=function(e){var t=e.target.value;n.setState({url:t}),n.validate(t)},n.resetMessage=function(){n.setState({message:"Please paste a proper link..."})},n.reset=function(){n.setState({shortened:"",url:"",isValid:!1})},n.storeLink=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat(k,"/links/store"),{url:n.state.url,shortened:t});case 3:a=e.sent,n.setState({shortened:a.data.shortened}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),422===e.t0.response.status&&(console.log(e.t0.response.data),n.reset());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.createShortLink=Object(f.a)(d.a.mark((function e(){var t,a,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.url,a={},e.prev=2,e.next=5,g.a.post("".concat(k,"/links/get"),{url:t});case 5:if(r=e.sent,!(a=r.data)){e.next=11;break}n.setState({shortened:a.shortened}),e.next=16;break;case 11:return e.next=13,g.a.get("".concat(k,"/links/count"));case 13:s=e.sent,o=E(s.data),n.storeLink(o);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0);case 21:n.getTop100();case 22:case"end":return e.stop()}}),e,null,[[2,18]])}))),n.onCopy=function(){return n.reset(),new Promise((function(e,t){return n.setState({message:"Your link is copied!"}),setTimeout((function(){return e()}),3e3)})).then((function(){return n.resetMessage}))},n.showTop100=function(){n.setState({showTop100:!n.state.showTop100})},n.state={url:"",shortened:"",isValid:!1,message:"Please paste a proper link...",top100:[],showTop100:!1},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getTop100()}},{key:"render",value:function(){var e=this,t=this.state.isValid?this.state.shortened?r.a.createElement(b,{what:this.state.shortened,onCopy:this.onCopy},"Click on me! Shortened: ",this.state.shortened):"Ready to shorten":this.state.message;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"URL Shortener"),r.a.createElement("div",{className:"link-shortened"},t),r.a.createElement(m,{value:this.state.url,onChange:this.onInputChange,type:"text",valid:this.state.isValid,autoFocus:!0}),r.a.createElement(v,{onClick:function(){return e.createShortLink()},disabled:!this.state.isValid},"Shorten"),r.a.createElement(v,{onClick:function(){return e.showTop100()}},"TOP 100"),this.state.showTop100?r.a.createElement("div",{className:"top100"},r.a.createElement("h3",null,"Top 100 Most frequently accessed URLs"),r.a.createElement("table",{className:"table table-light table-hover"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"URL"),r.a.createElement("th",{scope:"col"},"Times Accessed"))),r.a.createElement("tbody",null,this.state.top100.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"url"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url)),r.a.createElement("td",null,e.times_accessed))}))))):"")}}]),t}(a.Component),C=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))}}]),t}(r.a.Component);o.a.render(r.a.createElement(C,null),document.getElementById("app"))}},[[20,1,2]]]);
//# sourceMappingURL=main.d6eea099.chunk.js.map